{% extends 'base.html.twig' %}

{% block title %}Création du questionnaire{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{asset('build/css/app.css')}}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/back/create-survey.css">
{% endblock %}

{% block body %}
<div id="create" class="container">
  {% if app.session.flashBag.has('success') %}
    <div class="alert alert-success">
      {% for msg in app.session.flashBag.get('success') %}
        {{ msg }}
      {% endfor %}
    </div>
  {% endif %}
  {% if app.session.flashBag.has('danger') %}
    <div class="alert alert-danger">
      {% for msg in app.session.flashBag.get('danger') %}
        {{ msg }}
      {% endfor %}
    </div>
  {% endif %}

  <div class="card">
    <h5 class="card-header">Création du questionnaire</h5>
    <div class="card-body">

      {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'} }) }}

      <div class="form-group row justify-content-center">
        {{ form_label(form.composant, "Formation", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_widget(form.composant, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>
      <div class="form-group row justify-content-center">
        {{ form_label(form.promo, "Promotion", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_widget(form.promo, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>
      <div class="form-group row justify-content-center">
        {{ form_label(form.year, "Année", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_widget(form.year, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>
      <div class="form-group row justify-content-center">
        {{ form_label(form.ues, "Liste des UE", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_row(form.ues) }}
          <a href="#" id="add_ue" class="btn btn-light"><i class="fas fa-plus"></i> Ajouter une UE</a>
        </div>
      </div>
      <div class="form-group row justify-content-center">
        {{ form_label(form.title, "Titre", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>
      <div class="form-group row justify-content-center">
        {{ form_label(form.description, "Description", {'label_attr': {'class': 'col-sm-2 col-form-label'}}) }}
        <div class="col-sm-7">
          {{ form_widget(form.description, {'attr': {'class': 'form-control', 'rows': '5'}}) }}
        </div>
      </div>
      <div class="form-group row justify-content-center">
        <label for="inputFile" class="col-sm-2 col-form-label">Liste des étudiants</label>
        <div class="col-sm-7">
          <div class="custom-file">
            <input type="file" accept=".csv,.xlsx,.xls" name="file" class="custom-file-input" id="customFile" onchange="return fileValidation()" required>
            <label class="custom-file-label" for="customFile">Choisissez un fichier (.csv / .xlsx)</label>
            <div class="invalid-feedback">Choisissez un fichier ayant les extensions .csv/.xlsx</div>
          </div>
        </div>
      </div>
      <div class="form-group row justify-content-center">
        <label class="col-sm-2 col-form-label"></label>
        <div class="col-sm-7">
          {{ form_widget(form.create, {'attr': {'class': 'btn btn-primary'}}) }}
        </div>
      </div>

      {# Génération automatique des champs pas encore écrits.
         Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony !)
         et tous les champs cachés (type « hidden »). #}
      {{ form_rest(form) }}

      {# Fermeture de la balise <form> du formulaire HTML #}
      {{ form_end(form) }}
    </div>
  </div>

</div>

{% endblock %}

{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="{{ asset('build/js/app.js') }}"> </script>
    <script src="assets/js/back/create-survey.js"> </script>
{% endblock %}